<div class="row">
  <div class="col-md-12">
    <div class="card border-primary mb-3 custom-card">
      <form [formGroup]="roomsDetails" class="row g-3">
        <div formArrayName="rooms">
          <div *ngFor="let room of rooms.controls; let i = index" [formGroupName]="i">
            <div class="row">
              <h5 class="sub-head">ROOMS</h5>
              <div class="col-md-3">
                <mat-form-field class="general-full-width">
                  <mat-label>Name</mat-label>
                  <input matInput formControlName="name" required>
                  <mat-error *ngIf="room.get('name')?.hasError('required')">Room Name is required</mat-error>
                </mat-form-field>
              </div>
              <div class="col-md-3" style="margin-top:7px; margin-bottom: 26px;display: flex; justify-content: flex-end;">
                <button mat-flat-button (click)="removeRooms(i)" style="margin-right: 8px; background-color: #ED636D; color: white;">
                  Remove
                </button>
              </div>
            </div>
            <div formGroupName="bedroomwall" class="row">
              <h6 class="sub-head">Walls</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Walls</mat-label>
                  <mat-select formControlName="bedroomsWalls" multiple>
                    <mat-option *ngFor="let option of bedroomWallsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('bedroomwall.bedroomsWalls')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsWalls">
                </mat-form-field>
              </div>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Condition</mat-label>
                  <mat-select formControlName="bedroomsWallsCondition" multiple>
                    <mat-option *ngFor="let option of bedroomWallsConditionsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('bedroomwall.bedroomsWallsCondition')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsWallsCondition">
                </mat-form-field>
              </div>
            </div>

            <app-image-uploader [imageName]="roomsWallsImage + i"></app-image-uploader>


            <div formGroupName="ceiling" class="row">
              <h6 class="sub-head">Ceiling</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Ceiling</mat-label>
                  <mat-select formControlName="bedroomsCeilings" multiple>
                    <mat-option *ngFor="let option of bedroomCeilingsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('ceiling.bedroomsCeilings')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsCeilings">
                </mat-form-field>
              </div>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Condition</mat-label>
                  <mat-select formControlName="bedroomsCeilingsCondition" multiple>
                    <mat-option *ngFor="let option of bedroomCeilingsConditionsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('ceiling.bedroomsCeilingsCondition')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsCeilingsCondition">
                </mat-form-field>
              </div>
            </div>

            <app-image-uploader [imageName]="roomsCeilingImage + i"></app-image-uploader>

            <div formGroupName="floor" class="row">
              <h6 class="sub-head">Floors</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Floors</mat-label>
                  <mat-select formControlName="bedroomsFloors" multiple>
                    <mat-option *ngFor="let option of bedroomFloorsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('floor.bedroomsFloors')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsFloors">
                </mat-form-field>
              </div>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Condition</mat-label>
                  <mat-select formControlName="bedroomsFloorsCondition" multiple>
                    <mat-option *ngFor="let option of bedroomFloorsConditionsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('floor.bedroomsFloorsCondition')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsFloorsCondition">
                </mat-form-field>
              </div>
            </div>

            <app-image-uploader [imageName]="roomsFloorsImage + i"></app-image-uploader>


            <div formGroupName="closet" class="row">
              <h6 class="sub-head">Closet</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Closet</mat-label>
                  <mat-select formControlName="bedroomsClosets" multiple>
                    <mat-option *ngFor="let option of bedroomClosetsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('closet.bedroomsClosets')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsFloors">
                </mat-form-field>
              </div>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Condition</mat-label>
                  <mat-select formControlName="bedroomsClosetsCondition" multiple>
                    <mat-option *ngFor="let option of bedroomClosetsConditionsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('closet.bedroomsClosetsCondition')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsClosetsCondition">
                </mat-form-field>
              </div>
            </div>

            <app-image-uploader [imageName]="roomsClosetImage + i"></app-image-uploader>


            <div formGroupName="door" class="row">
              <h6 class="sub-head">Door</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Door</mat-label>
                  <mat-select formControlName="bedroomsDoors" multiple>
                    <mat-option *ngFor="let option of bedroomDoorsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('door.bedroomsDoors')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsDoors">
                </mat-form-field>
              </div>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Condition</mat-label>
                  <mat-select formControlName="bedroomsDoorsCondition" multiple>
                    <mat-option *ngFor="let option of bedroomClosetsConditionsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('door.bedroomsDoorsCondition')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsDoorsCondition">
                </mat-form-field>
              </div>
            </div>

            <app-image-uploader [imageName]="roomsDoorImage + i"></app-image-uploader>


            <div formGroupName="window" class="row">
              <h6 class="sub-head">Window</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Window</mat-label>
                  <mat-select formControlName="bedroomsWindows" multiple>
                    <mat-option *ngFor="let option of bedroomWindowsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('window.bedroomsWindows')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsWindows">
                </mat-form-field>
              </div>
            </div>

            <app-image-uploader [imageName]="roomsWindowsImage + i"></app-image-uploader>

            <div formGroupName="electrical" class="row">
              <h6 class="sub-head">Electrical</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Electrical</mat-label>
                  <mat-select formControlName="bedroomsElectricals" multiple>
                    <mat-option *ngFor="let option of bedroomElectricalsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('electrical.bedroomsElectricals')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsElectricals">
                </mat-form-field>
              </div>
            </div>

            <app-image-uploader [imageName]="roomsElectricalImage + i"></app-image-uploader>

            <div formGroupName="heatSource" class="row">
              <h6 class="sub-head">Heat Source</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Heat Source</mat-label>
                  <mat-select formControlName="bedroomsHeatSource" multiple>
                    <mat-option *ngFor="let option of bedroomHeatSourcesOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('heatSource.bedroomsHeatSource')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsHeatSource">
                </mat-form-field>
              </div>
            </div>

            <app-image-uploader [imageName]="roomsHeatSourceImage + i"></app-image-uploader>

            <div formGroupName="moistureStains" class="row">
              <h6 class="sub-head">Moisture Stains</h6>
              <div class="col-md-6">
                <mat-form-field class="general-full-width">
                  <mat-label>Moisture Stains</mat-label>
                  <mat-select formControlName="bedroomsMoistureStains" multiple>
                    <mat-option *ngFor="let option of bedroomMoistureStainsOptions" [value]="option">{{ option }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-6" *ngIf="room.get('moistureStains.bedroomsMoistureStains')?.value?.includes('Other')">
                <mat-form-field class="general-full-width">
                  <mat-label>Other</mat-label>
                  <input matInput formControlName="otherBedroomsMoistureStains">
                </mat-form-field>
              </div>
            </div>
            <div class="col-md-12">
              <mat-form-field class="general-full-width">
                <mat-label>Comments</mat-label>
                <input matInput formControlName="bedroomsComments">
              </mat-form-field>
            </div>
          </div>
        </div>
        <br>
        <div class="row">
          <button mat-flat-button (click)="addRooms()" [disabled]="!roomsDetails.valid">
            Add Room
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

